[gd_resource type="BehaviorTree" load_steps=15 format=3 uid="uid://dvv7t1jdna0ri"]

[ext_resource type="Script" uid="uid://duholooqx2vum" path="res://Scripts/system/ai/tasks/get_detector.gd" id="1_al123"]
[ext_resource type="Script" uid="uid://eu01augamggx" path="res://Scripts/system/ai/tasks/flee_from_light.gd" id="2_c65qo"]
[ext_resource type="Script" uid="uid://c31p6xk5rsnqg" path="res://Scripts/system/ai/tasks/is_caught_by_light.gd" id="2_qweif"]

[sub_resource type="BlackboardPlan" id="BlackboardPlan_say0x"]
var/speed/name = &"speed"
var/speed/type = 3
var/speed/value = 300.0
var/speed/hint = 0
var/speed/hint_string = ""

[sub_resource type="BTConsolePrint" id="BTConsolePrint_say0x"]
text = "Now BTState : Flee"

[sub_resource type="BTAction" id="BTAction_c65qo"]
script = ExtResource("1_al123")

[sub_resource type="BTAction" id="BTAction_8kyhe"]
script = ExtResource("2_c65qo")

[sub_resource type="BTTimeLimit" id="BTTimeLimit_qweif"]
time_limit = 0.1
children = [SubResource("BTAction_8kyhe")]

[sub_resource type="BTInvert" id="BTInvert_qweif"]
children = [SubResource("BTTimeLimit_qweif")]

[sub_resource type="BTCondition" id="BTCondition_qweif"]
script = ExtResource("2_qweif")

[sub_resource type="BTInvert" id="BTInvert_al123"]
custom_name = "back to patrol"
children = [SubResource("BTCondition_qweif")]

[sub_resource type="BTSequence" id="BTSequence_olf7p"]
custom_name = "flee loop"
children = [SubResource("BTInvert_qweif"), SubResource("BTInvert_al123")]

[sub_resource type="BTRepeatUntilSuccess" id="BTRepeatUntilSuccess_rauo6"]
children = [SubResource("BTSequence_olf7p")]

[sub_resource type="BTSequence" id="BTSequence_qm2ub"]
custom_name = "normal_demon"
children = [SubResource("BTConsolePrint_say0x"), SubResource("BTAction_c65qo"), SubResource("BTRepeatUntilSuccess_rauo6")]

[resource]
blackboard_plan = SubResource("BlackboardPlan_say0x")
root_task = SubResource("BTSequence_qm2ub")
