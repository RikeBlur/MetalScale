[gd_scene load_steps=23 format=3 uid="uid://ca6e3sjoclyky"]

[ext_resource type="PackedScene" uid="uid://dp5vrrvbeosux" path="res://System/RPG/entity/controllable/player_AX.tscn" id="1_xvil1"]
[ext_resource type="PackedScene" uid="uid://b7fgg2qcnwcji" path="res://System/RPG/entity/npc/AX/npc_ax.tscn" id="2_8l120"]
[ext_resource type="Shader" path="res://Effect/Shader/waving_noise/waving_noise.gdshader" id="2_v6rbn"]
[ext_resource type="Texture2D" uid="uid://dqodm34c1861l" path="res://Assests/sprite/qa/矩形 1.png" id="3_c5fvc"]
[ext_resource type="PackedScene" uid="uid://dbywm77u67n2u" path="res://System/RPG/interact/interacted_component.tscn" id="3_rnfxv"]
[ext_resource type="Script" path="res://Scripts/system/interact/dialogue_flag.gd" id="4_k6t0e"]
[ext_resource type="Script" path="res://Scripts/system/interact/dialogue_manager.gd" id="4_pkvo2"]
[ext_resource type="Script" path="res://Scripts/system/QA/waving_back.gd" id="4_y1sfr"]
[ext_resource type="Script" path="res://Scripts/system/interact/dialogue_resource/DialogueResource.gd" id="5_v6v0v"]
[ext_resource type="Script" path="res://Scripts/system/interact/dialogue_resource/DialogueTextResource.gd" id="6_46iy1"]
[ext_resource type="Script" path="res://Scripts/system/interact/dialogue_resource/DialogueFunctionResource.gd" id="7_fi20e"]
[ext_resource type="Script" path="res://Scripts/system/interact/dialogue_resource/DialogueChoiceResource.gd" id="8_a7bkp"]
[ext_resource type="Script" path="res://Scripts/system/interact/interact_manager.gd" id="10_denqn"]

[sub_resource type="Gradient" id="Gradient_2o8x6"]
offsets = PackedFloat32Array(0, 0.993506)

[sub_resource type="FastNoiseLite" id="FastNoiseLite_eyb0s"]
offset = Vector3(0, 140.35, 0)
fractal_type = 2
domain_warp_enabled = true
domain_warp_type = 1

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_up52x"]
color_ramp = SubResource("Gradient_2o8x6")
noise = SubResource("FastNoiseLite_eyb0s")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_oe86c"]
shader = ExtResource("2_v6rbn")
shader_parameter/wave_speed = 0.5
shader_parameter/noise_scale = 3.0
shader_parameter/wave_amplitude = 0.5
shader_parameter/time_offset = 0.0
shader_parameter/use_gradient = true
shader_parameter/base_color = Color(0.75, 0.0375, 0.0375, 1)
shader_parameter/alpha_multiplier = 1.0
shader_parameter/color_mix_strength = 0.75
shader_parameter/gradient_texture = SubResource("NoiseTexture2D_up52x")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_am6s1"]
size = Vector2(109, 150)

[sub_resource type="Resource" id="Resource_kc3q4"]
script = ExtResource("4_k6t0e")
flag = false
only_once = true
double = true
style = Array[int]([3])
start = Array[int]([0])
end = Array[int]([3])
a_index = Array[int]([0, 2])
b_index = Array[int]([1])

[sub_resource type="Resource" id="Resource_p08nu"]
script = ExtResource("6_46iy1")
speaker_entity = "Oni"
sprite_animation_name = "idle"
text = "You must be kidding me
"
text_speed = 8.0
text_volume_db = 0
text_volume_pitch_min = 0.85
text_volume_pitch_max = 1.15
camera_position = Vector2(999, 999)
camera_transition_time = 1.0

[sub_resource type="Resource" id="Resource_ev1je"]
script = ExtResource("6_46iy1")
speaker_entity = "AX"
sprite_animation_name = "idle"
text = "Fuck you leather man !"
text_speed = 8.0
text_volume_db = 0
text_volume_pitch_min = 0.85
text_volume_pitch_max = 1.15
camera_position = Vector2(999, 999)
camera_transition_time = 1.0

[sub_resource type="Resource" id="Resource_1xi42"]
script = ExtResource("8_a7bkp")
speaker_entity = "Oni"
sprite_animation_name = "idle"
text = "Do you like what you see?"
choice_text = Array[String](["Yes", "No"])
choice_function_call = Array[ExtResource("7_fi20e")]([null, null])

[node name="Test0" type="Node2D"]
y_sort_enabled = true

[node name="D1" type="Sprite2D" parent="."]
material = SubResource("ShaderMaterial_oe86c")
position = Vector2(596, 300)
scale = Vector2(2.61523, 1.35938)
texture = ExtResource("3_c5fvc")
script = ExtResource("4_y1sfr")

[node name="Player" parent="." instance=ExtResource("1_xvil1")]
y_sort_enabled = true
position = Vector2(605, 440)

[node name="ax_npc" parent="." instance=ExtResource("2_8l120")]
y_sort_enabled = true
position = Vector2(297, 369)

[node name="trigger_source_1" type="Area2D" parent="ax_npc"]
collision_layer = 128
collision_mask = 64

[node name="InteractedComponent" parent="ax_npc/trigger_source_1" node_paths=PackedStringArray("interacted_rage") instance=ExtResource("3_rnfxv")]
interacted_rage = NodePath("..")

[node name="CollisionShape2D" type="CollisionShape2D" parent="ax_npc/trigger_source_1"]
position = Vector2(4.5, -61)
shape = SubResource("RectangleShape2D_am6s1")

[node name="manager_manager" type="Node2D" parent="."]

[node name="dialogue_manager" type="Node2D" parent="manager_manager" node_paths=PackedStringArray("player_node")]
script = ExtResource("4_pkvo2")
trigger_source = [NodePath("../../ax_npc/trigger_source_1")]
trigger_flag = Array[ExtResource("4_k6t0e")]([SubResource("Resource_kc3q4")])
dialogue_content = Array[ExtResource("5_v6v0v")]([SubResource("Resource_p08nu"), SubResource("Resource_ev1je"), SubResource("Resource_1xi42")])
player_node = NodePath("../../Player")

[node name="interact_manager" type="Node2D" parent="manager_manager"]
script = ExtResource("10_denqn")

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(577, 328)
